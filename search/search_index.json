{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Formation Python, perfectionnement","text":"<p>Ceci est la page de ressources de ma formation Python, perfectionnement. Ces ressources sont  disponibles en fran\u00e7ais et en anglais.</p> <p>This is my ressources for the training Python, advanced. They are available  in English and in French</p>"},{"location":"en/activities/","title":"Activity workbook","text":""},{"location":"en/activities/#object-oriented-programming","title":"Object Oriented Programming","text":"<ul> <li>Properties</li> <li>Iterators</li> </ul>"},{"location":"en/activities/#closures-and-decorators","title":"Closures and decorators","text":"<ul> <li>Closures and decorators</li> </ul>"},{"location":"en/activities/#context-managers","title":"Context managers","text":"<ul> <li>Context managers</li> </ul>"},{"location":"en/activities/context_managers/","title":"Context managers","text":""},{"location":"en/activities/context_managers/#reminders","title":"Reminders","text":"<pre><code>class MyContext:\n    def __enter__(self):\n        return self\n\n    def __exit__(self, exc_type, exc_value, exc_tb):\n        pass\n</code></pre>"},{"location":"en/activities/context_managers/#activities","title":"Activities","text":"<ul> <li>First case</li> <li>Second case</li> <li>Third case</li> </ul>"},{"location":"en/activities/context_managers/activity_1/","title":"First activity","text":""},{"location":"en/activities/context_managers/activity_1/#introduction","title":"Introduction","text":"<p>With python, you can measure execution time of a code the following way:</p> <pre><code>import time\n\nstart = time.time()\n\nfor x in range(1_000_000):\n    y = x ** 2\n\nend = time.time()\n\nprint(end - start, \"seconds\")\n</code></pre>"},{"location":"en/activities/context_managers/activity_1/#subject","title":"Subject","text":"<p>Write a context manager to measure execution time of the code within the context. The context  manager prints the elapsed time on its exit.</p>"},{"location":"en/activities/context_managers/activity_2/","title":"Second activity","text":"<p>Write a context manager with a method <code>.print(str)</code>. This method should print the given string indented as the recursive call.</p> <p>Code example : <pre><code>with IndentContext() as ic:\n    ic.print(\"One line\")\n    ic.print(\"Another line\")\n    with ic:\n        ic.print(\"An indented line\")\n    ic.print(\"One more line\")\n</code></pre> You should get : <pre><code>One line\nAnother line\n    An indented line\nOne more line\n</code></pre></p>"},{"location":"en/activities/context_managers/activity_3/","title":"Third activity","text":"<p>Write a context manager to temporary change the working directory. Exiting the context, the working  directory must be the same as before entering the context.</p> <p>This is an example shows how to use the context manager: <pre><code>print(os.getcwd())\n\nwith changedir('/temp'):\n    print(os.getcwd())\n\nprint(os.getcwd())\n</code></pre> This code should display the current working directory, the directory <code>/temp</code> then once again the  first directory.</p> <p>Warning: on the code above, <code>'/temp'</code> is an example. Use an existing directory on your system.  Of course, you can consider creating the directory tree if it does not exist but should you delete  it on exit ? This is not asked for the activity.  </p> <p>You can change the working directory with  <code>os.chdir(path)</code>.</p>"},{"location":"en/activities/decorators/","title":"Closures and decorators","text":""},{"location":"en/activities/decorators/#closures","title":"Closures","text":"<ul> <li>Activity</li> </ul>"},{"location":"en/activities/decorators/#decorators","title":"Decorators","text":"<ul> <li>First case</li> <li>Second case</li> <li>Third case</li> <li>Fourth case</li> </ul>"},{"location":"en/activities/decorators/closures/","title":"Closures","text":"<p>We are going to use a function that simulates something long.</p> <pre><code>import time\n\ndef long_call(value:int):\n    time.sleep(2)\n    return value**2\n</code></pre> <p>This function calculates the square of the value but takes 2 seconds for that.</p>"},{"location":"en/activities/decorators/closures/#activity","title":"Activity","text":"<p>This function should be faster if called a second time with the same argument.</p> <p>Modify that function so that on each call she stores the result. If she's called a second time with  the same argument, she retunes the cached value instead of calculating it again. </p>"},{"location":"en/activities/decorators/closures/#improvement","title":"Improvement","text":"<p>Extend the feature for all previous values.</p>"},{"location":"en/activities/decorators/decorators_1/","title":"Decorators 1","text":""},{"location":"en/activities/decorators/decorators_1/#introduction","title":"Introduction","text":"<p>With python, you can measure execution time of a code the following way:</p> <pre><code>import time\n\nstart = time.time()\n\nfor x in range(1_000_000):\n    y = x ** 2\n\nend = time.time()\n\nprint(end - start, \"seconds\")\n</code></pre>"},{"location":"en/activities/decorators/decorators_1/#subject","title":"Subject","text":"<p>Write a decorator to measure execution time of the code within the context. The decorator prints  the elapsed time.</p>"},{"location":"en/activities/decorators/decorators_2/","title":"Decorators 2","text":""},{"location":"en/activities/decorators/decorators_2/#subject","title":"Subject","text":"<p>Write a decorator which will count the number of calls of the function</p>"},{"location":"en/activities/decorators/decorators_2/#exemple","title":"Exemple","text":"<p>The following code\u2026 <pre><code>@count_calls\ndef some_func():\n    print(\"func called\")\n\nprint(some_func.nbcalls())\nsome_func()\nsome_func()\nprint(some_func.nbcalls())\n</code></pre></p> <p>\u2026must display: <pre><code>0\nfunc called\nfunc called\n2\n</code></pre></p> <p>Hint: in Python, you can attach a function to another function. Try it.</p>"},{"location":"en/activities/decorators/decorators_3/","title":"Decorators 3","text":""},{"location":"en/activities/decorators/decorators_3/#presentation","title":"Presentation","text":"<p>We are going to use a function that simulates something long.</p> <pre><code>def long_call(value:int):\n    time.sleep(2)\n    return value**2\n</code></pre> <p>This function calculates the square of the value but takes 2 seconds for that.</p>"},{"location":"en/activities/decorators/decorators_3/#activity","title":"Activity","text":"<p>This function should be faster if called a second time with the same argument.</p> <p>Write a decorator to decorate this function so that on each call she stores the result. If she's  called a second time with the same argument, she retunes the cached value instead of calculating it  again. </p>"},{"location":"en/activities/decorators/decorators_3/#improvement","title":"Improvement","text":"<p>Extend the feature for all previous values.</p>"},{"location":"en/activities/decorators/decorators_4/","title":"Decorators 4","text":"<p>We have the following functions: <pre><code>def notify_mail():\n    print(\"notification on mail\")\n\ndef notify_sms():\n    print(\"notification on message\")\n\ndef notify_push():\n    print(\"notification on push service\")\n\ndef send_notifications():\n    pass\n</code></pre></p> <p>Copy this code into your source file.</p> <p>Those functions <code>notifyX()</code> are each sending a message on a dedicated channel.</p>"},{"location":"en/activities/decorators/decorators_4/#activity","title":"Activity","text":""},{"location":"en/activities/decorators/decorators_4/#first-part","title":"First part","text":"<p>You are going to fll the <code>send_notifications()</code> function so she triggers the sending of messages by calling some of the <code>notifyX()</code> functions. For this, you will create a decorator and use it to decorate one or more of those <code>notifyX()</code> functions. When <code>send_notifications()</code> will be called,  all the decorated functions (and only the decorated functions) will be called.</p> <p>Hint: you will certainly need a list for this.</p>"},{"location":"en/activities/decorators/decorators_4/#second-part","title":"Second part","text":"<p>Duplicate your source file if you want to keep your first part.</p> <p>The decorator must be parametrized. The parameter is the priority of the notification. The  priority is a positive or null integer, 0 being the lowest priority. Your called function becomes  <code>send_notifications(priority:int = 0)</code> and must activate all the functions decorated with a  priority higher or equal to the argument.</p>"},{"location":"en/activities/oop/iterators/","title":"Iterators","text":"<p>The <code>TvShow</code> class must have the behavior of an iterable on episodes: iterating over a TV series  should give us the episodes one after the other.</p> <p>Add that behavior.</p> <p>Add the collection special methods.</p> <p>Do the same on the <code>Playlist</code> class.</p>"},{"location":"en/activities/oop/properties/","title":"Properties","text":"<p>In the <code>pylib.pyflix.mediatheque</code> module, you will find a <code>TvShow</code> class. This class represents  a television show or in our case a television series. For now, the attributes are public.</p> <p>First, check the compliance to the specifications:</p> <ul> <li>The title is an attribute named <code>name</code> in lower case, the first letter of each word must be     uppercase.</li> <li>You can get the list of all episodes with an attribute.</li> <li>An episode is added with the <code>add_episode()</code> method.</li> <li>Duplication of episodes is prevented by raising an exception.</li> </ul> <p>Then, make sure that:</p> <ul> <li>The content of the episodes list must not be altered by its attribute. Only by calling the method.</li> <li>If the title is modified (with <code>myshow.name = 'New title'</code>), the letter case rule must be applied.</li> <li>We should get the series duration with an attribute.</li> </ul> <p>Update the other classes if needed.</p>"},{"location":"en/manual/","title":"Some title","text":"<ul> <li>Context Managers</li> </ul>"},{"location":"en/manual/context_managers/","title":"Context managers","text":""},{"location":"en/manual/context_managers/#basic-structure","title":"Basic structure","text":"<pre><code>class BasicContextManager:\n    def __enter__(self):\n        print(\"Entering Context Manager\")\n\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        print(\"Exiting Context Manager\")\n</code></pre> <p>Usage:</p> <pre><code>with BasicContextManager():\n    print('In context')\n</code></pre>"},{"location":"en/manual/context_managers/#a-context-manager-is-an-object","title":"A context manager is an object","text":"<p>A context manager is a class and so, an object. It can have a <code>__init__(self)</code> method.</p> <pre><code>class BasicContextManager:\n    def __init__(self):\n        print(\"Initializing\")\n        self.my_id = \"I'm the context\"\n\n    def __enter__(self):\n        print(\"Entering Context Manager\")\n\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        print(\"Exiting Context Manager\")\n</code></pre> <pre><code>bc = BasicContextManager()\nwith bc:\n    print(f'In context {bc.my_id}')\n</code></pre>"},{"location":"en/manual/context_managers/#idiome-with-as","title":"Idiome with as","text":"<p>The keyword <code>as</code> gets the return of the <code>__enter__(self)</code> method.</p> <pre><code>class BasicContextManager:\n    def __init__(self):\n        print(\"Initializing\")\n        self.my_id = \"I'm the context\"\n\n    def __enter__(self):\n        print(\"Entering Context Manager\")\n        return self\n</code></pre> <p>Let us write: <pre><code>with BasicContextManager() as bc:\n    print(f'In context {bc.my_id}')\n</code></pre></p>"},{"location":"en/manual/context_managers/#exceptions-management","title":"Exceptions management","text":""},{"location":"en/manual/context_managers/#__exit__-parameters","title":"<code>__exit__()</code> parameters","text":"<p>Exceptions thrown in the context can be managed in the <code>__exit__()</code> method.</p> <p>The method parameters will be of use there. The entire signature  is <code>__exit__(self, exc_type, exc_value, exc_tb)</code>.</p> <ul> <li>exc_type : is the exception type (class)</li> <li>exc_value : is the exception instance (object)</li> <li>exc_tb : is a traceback object</li> </ul> <p>Warning, you shouldn't rise an exception in the exit method.</p>"},{"location":"en/manual/context_managers/#exception-propagation","title":"Exception propagation","text":"<p>If you have managed the exception and it shouldn't be propagated, the method must return  a truthy value. If the method returns a falsy value, which is the default as it returns  <code>None</code>, the exception is propagated up.</p>"},{"location":"en/manual/iterators/","title":"Iterators","text":"<p>An iterator is an object that returns the next element of an iterable. The most common  iterables are sequences or generators.</p> <p>An iterable object is an object that implements <code>__iter__</code>, which is expected to return an  iterator object. An iterator object implements <code>__next__</code>, which is expected to return the next  element of the iterable or raise a <code>StopIteration</code> when no more elements are available.</p>"},{"location":"fr/activities/iterators/","title":"Les it\u00e9rateurs","text":"<p>La classe TvShow doit avoir la fonctionnalit\u00e9  d\u2019it\u00e9rable sur les \u00e9pisodes : it\u00e9rer sur la s\u00e9rie  doit nous permettre d\u2019obtenir les \u00e9pisodes les un apr\u00e8s les autres.</p> <p>Compl\u00e9tez avec les m\u00e9thodes sp\u00e9ciales des collections.</p> <p>Faites de m\u00eame avec la playlist.</p>"},{"location":"fr/activities/multithreading/","title":"MultiThreading","text":""},{"location":"fr/activities/multithreading/#sujet-telechargement-simule-de-fichiers-en-parallele","title":"Sujet : T\u00e9l\u00e9chargement simul\u00e9 de fichiers en parall\u00e8le","text":""},{"location":"fr/activities/multithreading/#contexte","title":"Contexte :","text":"<p>Vous \u00eates charg\u00e9(e) de simuler le t\u00e9l\u00e9chargement de plusieurs fichiers \u00e0 partir d\u2019un serveur.  Chaque t\u00e9l\u00e9chargement prend un temps al\u00e9atoire entre 1 et 5 secondes. Vous devez d\u00e9marrer tous les  t\u00e9l\u00e9chargements en m\u00eame temps, et afficher un message lorsque chacun d\u2019eux est termin\u00e9.</p>"},{"location":"fr/activities/multithreading/#specifications-de-lexercice","title":"Sp\u00e9cifications de l\u2019exercice :","text":"<ul> <li>Cr\u00e9ez une fonction download_file(file_name:str) :</li> <li>Elle prend en param\u00e8tre un nom de fichier (ex : \"fichier_1.txt\").</li> <li>Elle simule le t\u00e9l\u00e9chargement en faisant un <code>time.sleep()</code> d'une dur\u00e9e al\u00e9atoire entre 1 et 5       secondes.</li> <li>Elle affiche un message une fois le \"t\u00e9l\u00e9chargement\" termin\u00e9.</li> <li>Demandez \u00e0 l\u2019utilisateur combien de fichiers il veut t\u00e9l\u00e9charger (ou fixez une valeur par     d\u00e9faut, ex. 5).</li> <li>Cr\u00e9ez un thread pour chaque t\u00e9l\u00e9chargement et d\u00e9marrez-les tous.</li> <li>Attendez que tous les threads soient termin\u00e9s avant de terminer le programme (utilisez .join()).</li> </ul>"},{"location":"fr/activities/multithreading/#exemple-de-resultat-attendu","title":"Exemple de r\u00e9sultat attendu :","text":"<pre><code>T\u00e9l\u00e9chargement de fichier_1.txt lanc\u00e9...\nT\u00e9l\u00e9chargement de fichier_2.txt lanc\u00e9...\nT\u00e9l\u00e9chargement de fichier_3.txt lanc\u00e9...\nT\u00e9l\u00e9chargement de fichier_4.txt lanc\u00e9...\nT\u00e9l\u00e9chargement de fichier_5.txt lanc\u00e9...\n\nfichier_3.txt t\u00e9l\u00e9charg\u00e9 en 1.4 secondes\nfichier_1.txt t\u00e9l\u00e9charg\u00e9 en 2.9 secondes\nfichier_5.txt t\u00e9l\u00e9charg\u00e9 en 3.3 secondes\nfichier_2.txt t\u00e9l\u00e9charg\u00e9 en 4.7 secondes\nfichier_4.txt t\u00e9l\u00e9charg\u00e9 en 4.9 secondes\nTous les t\u00e9l\u00e9chargements sont termin\u00e9s.\n</code></pre>"},{"location":"fr/activities/multithreading/#precisions","title":"Pr\u00e9cisions","text":"<ul> <li>Commencez par une version simple</li> <li>Proposez une version plus moderne avec <code>concurrent.futures.ThreadPoolExecutor</code></li> </ul>"},{"location":"fr/activities/properties/","title":"Les properties","text":"<p>Le module <code>pylib.pyflix.mediatheque</code> contient une classe <code>TvShow</code> qui repr\u00e9sente une s\u00e9rie. Pour  l\u2019instant tous les attributs sont publics.</p> <p>Commencez par v\u00e9rifier la conformit\u00e9 des sp\u00e9cifications :</p> <ul> <li>Le titre est un attribut du nom <code>name</code> et doit \u00eatre en minuscules, la premi\u00e8re lettre des mots en     capitale.</li> <li>La liste des \u00e9pisodes est retourn\u00e9e par un attribut</li> <li>Un \u00e9pisode est ajout\u00e9s par la m\u00e9thode <code>add_episode()</code>.</li> <li>Ajouter un doublon doit r\u00e9sulter en une exception.</li> </ul> <p>Ensuite, vous devrez vous assurer que :</p> <ul> <li>la liste des \u00e9pisodes ne doit pas \u00eatre modifi\u00e9e par son attribut, uniquement en ajoutant un     \u00e9pisode par la m\u00e9thode.</li> <li>Si le titre est modifi\u00e9 par l\u2019affectation \u00e0 l\u2019attribut, la casse doit \u00eatre respect\u00e9e</li> <li>Nous devons pouvoir obtenir la dur\u00e9e de la s\u00e9rie par une syntaxe d\u2019attribut.</li> </ul> <p>Compl\u00e9tez \u00e9galement si n\u00e9cessaire les autres classes du module.</p>"},{"location":"fr/activities/rappels_1/","title":"Rappels - Visibilit\u00e9 de variables","text":"<p>Vous travaillerez dans un script que vous nommerez <code>exo_01.py</code> dans le package <code>exos</code></p> <p>Soit les variables <pre><code>kingdom = []\ncount = 0\n</code></pre></p> <p>\u00c9crivez une fonction <code>add_knight(knight:str) -&gt; None</code> qui ajoute un chevalier (repr\u00e9sent\u00e9 par son  nom) \u00e0 la liste et incr\u00e9mente le compteur. </p>"},{"location":"fr/activities/rappels_2/","title":"Rappels - variable par d\u00e9faut","text":"<p>Vous travaillerez dans le script <code>exo_02.py</code> du package <code>exos</code> qui existe d\u00e9j\u00e0 et poss\u00e8de la  fonction suivante :</p> <pre><code>def add_knight(knight:str, kingdom:list=[]):\n    kingdom.append(knight)\n    return kingdom\n</code></pre> <p>Testez la fonction et identifiez ce qui ne va pas.</p> <p>Proposez une solution pour \u00e9viter ce bug.</p> <p>Dans le cas id\u00e9al, travaillez avec des tests.</p>"},{"location":"fr/activities/rappels_3/","title":"Rappels - it\u00e9rations","text":"<p>Pour cet exercice, vous utiliserez le module <code>pylib.datasources.pyacademy</code>. Celui-ci contient deux  fonctions, <code>load_students_list()</code> et <code>load_grades(course:str)</code>.</p> <p><code>load_students_list()</code> retourne une liste d\u2019\u00e9tudiants</p> <p><code>load_grades(course:str)</code> prend en param\u00e8tre les valeurs <code>math</code> ou <code>english</code> et retourne la liste  des notes pour cette mati\u00e8re. Toute autre argument l\u00e8vera une exception.</p> <p>Il est consid\u00e9r\u00e9 que les fonctions retournent les donn\u00e9es dans le m\u00eame ordre (une note en position  i du retour de la fonction <code>load_grades(course:str)</code> correspond \u00e0 la note de l\u2019\u00e9l\u00e8ve en position i  du retour de la fonction <code>load_students_list()</code>).</p> <p>It\u00e9rez sur les trois collections (\u00e9tudiants, notes de math et notes d\u2019anglais) pour afficher les  \u00e9l\u00e8ves avec leur notes.</p> <p>Construisez un dictionnaire dont la clef sera le nom de l\u2019\u00e9l\u00e8ve et la valeur sera la liste de ses  notes (maths en premi\u00e8re position, anglais en seconde).</p>"},{"location":"fr/activities/rappels_4/","title":"Rappels - It\u00e9rations","text":"<p>Le projet qui vous a \u00e9t\u00e9 fourni contient un module <code>pylib.datasources.pyflix</code> . Celui-ci contient  la fonction <code>load_season(show_name, season_number)</code>. Cette fonction charge la saison d\u2019une s\u00e9rie \u00e0  partir d\u2019une base de donn\u00e9es. Enfin, le simule\u2026</p> <p>Nous souhaitons g\u00e9rer la notion d\u2019\u00e9pisode avec une syntaxe objet.</p> <p>D\u00e9clarez un <code>namedtuple</code> qui d\u00e9crit un \u00e9pisode poss\u00e9dant les champs <code>title</code>, <code>season_number</code>,  <code>number</code>, <code>duration</code>et <code>year</code>.</p> <p>\u00c9crivez une fonction qui retourne une liste de ces <code>namedtuples</code> \u00e0 partir de l\u2019appel \u00e0 la fonction  <code>pylib.datasources.pyflix.load_season(show_name, season_number)</code>.</p>"},{"location":"fr/activities/context_managers/","title":"Les context managers","text":""},{"location":"fr/activities/context_managers/#exercices","title":"Exercices","text":"<ul> <li>Premier exercice</li> <li>Second exercice</li> <li>Troisi\u00e8me exercice</li> </ul>"},{"location":"fr/activities/context_managers/#rappels","title":"Rappels","text":"<pre><code>class MyContext:\n    def __enter__(self):\n        return self\n\n    def __exit__(self, exc_type, exc_value, exc_tb):\n        pass\n</code></pre>"},{"location":"fr/activities/context_managers/activity_1/","title":"Premier exeercice","text":""},{"location":"fr/activities/context_managers/activity_1/#introduction","title":"Introduction","text":"<p>En Python, il est possible de mesurer la dur\u00e9e d\u2019ex\u00e9cution d\u2019un code de la mani\u00e8re suivante :</p> <pre><code>import time\n\nstart = time.time()\n\nfor x in range(1_000_000):\n    y = x ** 2\n\nend = time.time()\n\nprint(end - start, \"secondes se sont \u00e9coul\u00e9es\")\n</code></pre>"},{"location":"fr/activities/context_managers/activity_1/#sujet","title":"Sujet","text":"<p>\u00c9crivez un context manager qui permet de mesurer l\u2019ex\u00e9cution du code dans le contexte. En sortie du  context, le context manager affiche la dur\u00e9e d\u2019ex\u00e9cution.</p>"},{"location":"fr/activities/context_managers/activity_2/","title":"Second exercice","text":"<p>\u00c9crire un contexte manager qui contient une m\u00e9thode <code>.print(str)</code>. Celle-ci affiche la chaine de  caract\u00e8res pass\u00e9e en param\u00e8tre en l\u2019indentant en fonction de l\u2019appel r\u00e9cursif du contexte manager.</p> <p>Exemple de code : <pre><code>with IndentContext() as ic:\n    ic.print(\"une ligne\")\n    ic.print(\"une autre ligne\")\n    with ic:\n        ic.print(\"une ligne indent\u00e9e\")\n    ic.print(\"une autre ligne\")\n</code></pre> Doit  donner une sortie comme ceci : <pre><code>une ligne\nune autre ligne\n    une ligne indent\u00e9e\nune autre ligne\n</code></pre></p>"},{"location":"fr/activities/context_managers/activity_3/","title":"Troisi\u00e8me exercice","text":"<p>\u00c9crivez un context manager qui permet de travailler temporairement dans un autre r\u00e9pertoire. En  sortie du context manager, Python doit revenir dans son r\u00e9pertoire de travail d\u2019avant l\u2019appel au  context manager.</p> <p>Ainsi, vous devez pouvoir ex\u00e9cuter ce type de code : <pre><code>print(os.getcwd())\n\nwith changedir('/temp'):\n    print(os.getcwd())\n\nprint(os.getcwd())\n</code></pre></p> <p>Qui doit vous afficher respectivement le r\u00e9pertoire de travail, le r\u00e9pertoire <code>/temp</code> puis le  r\u00e9pertoire de travail.</p> <p>Pour rappel, vous pouvez changer de r\u00e9pertoire de travail avec  <code>os.chdir(path)</code>.</p>"},{"location":"fr/activities/decorators/","title":"Closures et d\u00e9corateurs","text":""},{"location":"fr/activities/decorators/#les-closures","title":"Les closures","text":"<ul> <li>Exercice</li> </ul>"},{"location":"fr/activities/decorators/#les-decorateurs","title":"Les d\u00e9corateurs","text":"<ul> <li>Premier exercice</li> <li>Second exercice</li> <li>Troisi\u00e8me exercice</li> <li>Quatri\u00e8me exercice</li> </ul>"},{"location":"fr/activities/decorators/closures/","title":"Les closures","text":"<p>Nous allons \u00e9crire une fonction qui simule faire quelque chose de \u00ab long \u00bb. Soit donc la fonction  suivante.</p> <pre><code>import time\n\ndef long_call(value:int):\n    time.sleep(2)\n    return value**2\n</code></pre> <p>Cette fonction ne calcule que le carr\u00e9 du param\u00e8tre mais son temps d'ex\u00e9cution est de 2 secondes.</p>"},{"location":"fr/activities/decorators/closures/#exercice","title":"Exercice","text":"<p>Modifiez cette fonction afin que si elle est appel\u00e9e avec l\u2019argument pr\u00e9c\u00e9dent, elle \"ne refait pas  le calcul\" mais utilise la valeur en cache.</p>"},{"location":"fr/activities/decorators/closures/#evolution","title":"\u00c9volution","text":"<p>\u00c9tendez la fonctionnalit\u00e9 pour toutes les valeurs pr\u00e9c\u00e9dentes.</p>"},{"location":"fr/activities/decorators/decorators_1/","title":"D\u00e9corateurs 01","text":""},{"location":"fr/activities/decorators/decorators_1/#introduction","title":"Introduction","text":"<p>En Python, il est possible de mesurer la dur\u00e9e d\u2019ex\u00e9cution d\u2019un code de la mani\u00e8re suivante :</p> <pre><code>import time\n\nstart = time.time()\n\nfor x in range(1_000_000):\n    y = x ** 2\n\nend = time.time()\n\nprint(end - start, \"secondes se sont \u00e9coul\u00e9es\")\n</code></pre>"},{"location":"fr/activities/decorators/decorators_1/#sujet","title":"Sujet","text":"<p>\u00c9crivez un d\u00e9corateur qui permet de mesurer le temps d\u2019ex\u00e9cution d\u2019une fonction. Le d\u00e9corateur  devra simplement afficher le temps d\u2019ex\u00e9cution.</p>"},{"location":"fr/activities/decorators/decorators_2/","title":"D\u00e9corateurs 2","text":""},{"location":"fr/activities/decorators/decorators_2/#sujet","title":"Sujet","text":"<p>\u00c9crire un d\u00e9corateur qui permet de compter le nombre d\u2019appels \u00e0 une fonction.</p>"},{"location":"fr/activities/decorators/decorators_2/#exemple","title":"Exemple","text":"<p>Le code suivant\u2026 <pre><code>@count_calls\ndef some_func():\n    print(\"func called\")\n\nprint(some_func.nbcalls())\nsome_func()\nsome_func()\nprint(some_func.nbcalls())\n</code></pre></p> <p>\u2026doit donner : <pre><code>0\nfunc called\nfunc called\n2\n</code></pre></p> <p>Indice : en python, il est possible d\u2019associer une fonction \u00e0 une fonction\u2026 Essayez.</p>"},{"location":"fr/activities/decorators/decorators_3/","title":"D\u00e9corateurs 3","text":""},{"location":"fr/activities/decorators/decorators_3/#presentation","title":"Pr\u00e9sentation","text":"<p>Nous allons \u00e9crire une fonction qui simule faire quelque chose de \u00ab long \u00bb. Soit donc la fonction  suivante.</p> <pre><code>def long_call(value:int):\n    time.sleep(2)\n    return value**2\n</code></pre> <p>Cette fonction ne calcule que le carr\u00e9 du param\u00e8tre mais son temps d'ex\u00e9cution est de 2 secondes.</p>"},{"location":"fr/activities/decorators/decorators_3/#sujet","title":"Sujet","text":"<p>Cr\u00e9ez un d\u00e9corateur qui permet de mettre la valeur calcul\u00e9e en cache. Si la fonction est rappel\u00e9e  avec la valeur qui vient d'\u00eatre calcul\u00e9e, elle ne refait pas le calcul mais retourne la valeur en  cache.</p>"},{"location":"fr/activities/decorators/decorators_3/#evolution","title":"\u00c9volution","text":"<p>Am\u00e9liorez le d\u00e9corateur pour permettre \u00e0 plusieurs valeurs d'\u00eatre mises en cache.</p>"},{"location":"fr/activities/decorators/decorators_4/","title":"D\u00e9corateurs 4","text":"<p>Soit les fonctions suivantes : <pre><code>def notify_mail():\n    print(\"notification on mail\")\n\ndef notify_sms():\n    print(\"notification on message\")\n\ndef notify_push():\n    print(\"notification on push service\")\n\ndef send_notifications():\n    pass\n</code></pre></p> <p>Recopiez ce code dans un fichier source.</p> <p>Ces fonctions <code>notifyX()</code> sont des fonctions d\u2019envoi de message.</p>"},{"location":"fr/activities/decorators/decorators_4/#exercice","title":"Exercice","text":""},{"location":"fr/activities/decorators/decorators_4/#premiere-partie","title":"Premi\u00e8re partie","text":"<p>Vous allez compl\u00e9ter la fonction <code>send_notifications()</code> pour qu'elle d\u00e9clenche l'envoi de  notifications en ex\u00e9cutant des fonctions <code>notifyX()</code>. Pour cela, vous allez cr\u00e9er un d\u00e9corateur  afin de d\u00e9corer une ou plusieurs de ces fonctions <code>notifyX()</code>. Lorsque <code>send_notifications()</code> sera  ex\u00e9cut\u00e9, toutes les fonctions d\u00e9cor\u00e9es (et uniquement celles-ci) devront \u00eatre ex\u00e9cut\u00e9es.</p> <p>Indice : vous aurez certainement besoin d\u2019une liste pour cela\u2026</p>"},{"location":"fr/activities/decorators/decorators_4/#seconde-partie","title":"Seconde partie","text":"<p>Pour cette partie, dupliquez le fichier de l'exercice si vous souhaitez le conserver car il vous  fera perdre la partie pr\u00e9c\u00e9dente.</p> <p>Le d\u00e9corateur de ces fonction doit \u00eatre param\u00e9tr\u00e9. Le param\u00e8tre est la priorit\u00e9 de la notification.  Cette priorit\u00e9 est repr\u00e9sent\u00e9e par un entier positif ou nul, 0 repr\u00e9sente la priorit\u00e9 la plus  faible. La fonction d'envoi qui devient <code>send_notifications(priority:int = 0)</code> doit activer toutes  les fonction d\u00e9cor\u00e9es par la priorit\u00e9 indiqu\u00e9e ou sup\u00e9rieure.</p>"},{"location":"fr/demos/","title":"Documentation sur les d\u00e9mos","text":"<p>Ces documents d\u00e9crivent le contenu des scripts de d\u00e9mo.</p>"},{"location":"fr/demos/parallelism/processes/","title":"Le multiprocessing","text":"<p>Les exemples sont dans le package <code>demos.parallelism.multipro</code>.</p>"},{"location":"fr/demos/parallelism/processes/#illustration-du-multiprocessing","title":"Illustration du multiprocessing","text":"<p>Le script <code>01_process.py</code> illustre le multiprocessing. Le script ex\u00e9cute d'abord les appels de  mani\u00e8re s\u00e9quentielle puis les t\u00e2ches (<code>import as Task</code>).</p> <p>R\u00e9aliser les appels :</p> <pre><code>python -m demos.parallelism.multipro.01_process\npython -m demos.parallelism.multipro.01_process -p\n</code></pre> <p>Le premier ex\u00e9cute des threads, le second des process.</p>"},{"location":"fr/demos/parallelism/processes/#shared-memory","title":"Shared Memory","text":"<p>Les diff\u00e9rents scripts <code>shared_memory</code> illustrent l'utilisation et le comportement de la m\u00e9moire partag\u00e9e.</p> <ul> <li><code>shared_memory_01.py</code> : principe de base de l'objet <code>SharedMemory</code>.</li> <li><code>shared_memory_02.py</code> : Usage de la <code>SharedMemory</code> avec un process et passage par argument.</li> <li><code>shared_memory_03.py</code> : Usage de la <code>SharedMemory</code> avec un process et acc\u00e8s par identifiant.</li> <li><code>shared_memory_04_int.py</code> : Usage de la SharedMemory avec liste d'entiers.</li> <li><code>shared_memory_05_sharedlist.py</code> :</li> </ul>"},{"location":"fr/demos/parallelism/threads/","title":"Le multithreading","text":"<p>Les exemples sont dans le package <code>demos.parallelism.threads</code>. Certains exemples ont une version  avec un affichage plus riche dans <code>demos.parallelism.threads_rich</code>.</p>"},{"location":"fr/demos/parallelism/threads/#le-besoin-de-parallelisme","title":"Le besoin de parall\u00e9lisme","text":"<p>Le script <code>01_thread.py</code> est un exemple s\u00e9quentiel destin\u00e9 \u00e0 illustrer la dur\u00e9e totale d'ex\u00e9cution  de deux t\u00e2ches. La version <code>demos.parallelism.threads_rich.01_thread_rich</code> poss\u00e8de un affichage  moins charg\u00e9.</p> <p>Ex\u00e9cutez : <pre><code>python -m demos.parallelism.threads.01_thread\npython -m demos.parallelism.threads_rich.01_thread_rich\n</code></pre></p>"},{"location":"fr/demos/parallelism/threads/#les-treads-les-bases","title":"Les treads, les bases","text":"<ul> <li><code>02a_thread.py</code> : exemple avec des threads. La dur\u00e9e totale est celle du programme principal.    L'ajout des <code>.join()</code> permet d'attendre la finalisation des actions en parall\u00e8le.</li> <li><code>demos.parallelism.threads_rich.02_thread_rich</code> : est le m\u00eame que le pr\u00e9c\u00e9dent avec un affichage    moins charg\u00e9.</li> <li><code>02b_custom_thread.py</code> : de comportement identique au pr\u00e9c\u00e9dent mais en d\u00e9clarant un objet    thread custom.</li> <li><code>demos.parallelism.threads_rich.02_custom_thread_rich</code> : version avec thread custom et    affichage plus informatif.</li> </ul> <p>Ex\u00e9cutez : <pre><code>python -m demos.parallelism.threads.02a_thread\npython -m demos.parallelism.threads_rich.02_thread_rich\npython -m demos.parallelism.threads.02b_custom_thread\npython -m demos.parallelism.threads_rich.02_custom_thread_rich\n</code></pre></p> <p>Les script <code>02c_timer.py</code> est une curiosit\u00e9 adapt\u00e9 \u00e0 notre cas et permet de lancer un thread apr\u00e8s  un d\u00e9lais.</p>"},{"location":"fr/demos/parallelism/threads/#les-semaphores","title":"Les s\u00e9maphores","text":"<ul> <li><code>03_semaphore.py</code> : exemple de base</li> <li><code>demos.parallelism.threads_rich.03_semaphore_rich</code> : affichage plus lisible.</li> </ul> <p>\u00c9x\u00e9cutez : <pre><code>python -m demos.parallelism.threads_rich.03_semaphore_rich\n</code></pre></p>"},{"location":"fr/demos/parallelism/threads/#une-interface-plus-haut-niveau","title":"Une interface plus haut niveau","text":"<p>Le module <code>concurrent.futures</code> fournit une interface haut niveau pour l'ex\u00e9cution asynchrone.</p> <ul> <li><code>04a_thread_future.py</code> : Reprise du second exemple avec les threads.</li> <li><code>04b_more_futures.py</code> : Pour aller plus loin en associant une callback aux t\u00e2ches.</li> </ul> <p>Ex\u00e9cutez : <pre><code>python -m demos.parallelism.threads.04a_thread_futures\npython -m demos.parallelism.threads.04b_more_futures\n</code></pre></p>"},{"location":"fr/demos/parallelism/threads/#les-verrous","title":"Les verrous","text":"<ul> <li><code>05a_lock.py</code> : Illustration du probl\u00e8me de concurrence.</li> <li><code>05b_lock_bank01_without.py</code> : exemple illustrant la concurrence avec un <code>ThreadPoolExecutor</code>     sans lock.</li> <li><code>05c_lock_bank02_withlock.py</code> : exemple illustrant la concurrence avec un <code>ThreadPoolExecutor</code>     avec lock.</li> <li><code>05d_lock_bank03_deadlock.py</code> : exemple conduisant au deadlock.</li> </ul> <p>Ex\u00e9cutez : <pre><code>python -m demos.parallelism.threads.05a_lock\npython -m demos.parallelism.threads.05b_lock_bank01_without\npython -m demos.parallelism.threads.05c_lock_bank02_withlock\npython -m demos.parallelism.threads.05d_lock_bank03_deadlock\n</code></pre></p>"},{"location":"fr/demos/parallelism/threads/#06_waitpy","title":"06_wait.py","text":"<p>Concurrence g\u00e9r\u00e9e avec la m\u00e9thode <code>wait</code>.</p>"},{"location":"fr/demos/parallelism/threads/#les-limites-du-multithreading","title":"Les limites du multithreading","text":"<p>Illustration avec le script <code>07_limit.py</code>.</p> <p>Ex\u00e9cutez : <pre><code>python -m demos.parallelism.threads.07_limit\n</code></pre></p>"},{"location":"fr/manual/","title":"Rappels et aides m\u00e9moire","text":""},{"location":"fr/manual/iterators/","title":"Les it\u00e9rateurs","text":"<p>Un it\u00e9rateur est un objet qui permet de retourner le prochain \u00e9l\u00e9ment d\u2019un it\u00e9rable. Les  exemples les plus simples d\u2019it\u00e9rateurs sont les s\u00e9quences mais aussi les g\u00e9n\u00e9rateurs.</p> <p>Un it\u00e9rable est un objet implantant la m\u00e9thode sp\u00e9ciale <code>__iter__</code>  qui doit retourner un  it\u00e9rateur. Un it\u00e9rateur est un objet implantant la m\u00e9thode sp\u00e9ciale <code>__next__</code>. Cette m\u00e9thode  doit retourner l\u2019\u00e9l\u00e9ment suivant ou lever une exception de type <code>StopIteration</code>.</p>"}]}